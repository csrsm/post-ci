(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{526:function(a,t,s){"use strict";s.r(t);var e=s(5),n=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"kubernetes命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes命令"}},[a._v("#")]),a._v(" Kubernetes命令")]),a._v(" "),s("h2",{attrs:{id:"pod命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pod命令"}},[a._v("#")]),a._v(" pod命令")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("kubectl get pods\nkubectl get pods -o wide "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#详细信息")]),a._v("\nkubectl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" -it "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("pod-name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#进入到一个pod中,pod只有一个容器")]),a._v("\nkubectl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" -it "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("pod-name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" -c "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("container-name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#进入到一个pod中,pod有多个容器需要指定容器名称")]),a._v("\nkubectl delete pod "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("pod-name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" -n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("namesapce"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),s("h2",{attrs:{id:"label命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#label命令"}},[a._v("#")]),a._v(" label命令")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("kubectl lable "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("node")]),a._v(" node1 "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("env_role")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("dev  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#配合nodeSelector使用，进行pod节点选择")]),a._v("\n")])])]),s("h2",{attrs:{id:"node命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#node命令"}},[a._v("#")]),a._v(" node命令")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("kubectl get nodes\nkubectl get nodes k8snode1 --show-labels  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#显示节点标签")]),a._v("\n")])])]),s("h2",{attrs:{id:"describe命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#describe命令"}},[a._v("#")]),a._v(" describe命令")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("kubectl describe "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("node")]),a._v(" k8smaster "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" Taint  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#查看节点污点信息")]),a._v("\n")])])]),s("h2",{attrs:{id:"taint命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#taint命令"}},[a._v("#")]),a._v(" taint命令")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("kubectl taint "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("node")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("key")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("value:污点三个值 "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#NoSchedule 一定不被调度 PreferNoSchedule 尽量不被调度 NoExecute 不会调度，并且还会驱逐Node已有Pod")]),a._v("\n\nkubectl taint "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("node")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" key:污点值-  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#删除一个节点的污点")]),a._v("\n")])])]),s("h2",{attrs:{id:"controller命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#controller命令"}},[a._v("#")]),a._v(" controller命令")]),a._v(" "),s("h3",{attrs:{id:"deployment"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deployment"}},[a._v("#")]),a._v(" deployment")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("kubectl create deployment web --image"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("nginx\nkubectl create deployment web --image"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("nginx --dry-run -o yaml "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" web.yaml "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#不创建deployment，导出创建该deployment的yaml文件")]),a._v("\n\nkubectl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" image deployment web "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("nginx")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("nginx:1.15 "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#nginx版本滚动升级")]),a._v("\nkubectl rollout status deployment web "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#查看升级状态")]),a._v("\nkubectl rollout "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("history")]),a._v(" deployment web "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#查看历史版本")]),a._v("\nkubectl rollout undo deployment web "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#还原到上一个版本")]),a._v("\nkubectl rollout undo deployment web --to-reverion"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#还原到版本2")]),a._v("\n")])])]),s("h2",{attrs:{id:"service命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#service命令"}},[a._v("#")]),a._v(" Service命令")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("kubectl get svc\nkubectl get "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v("\nkubectl edit svc "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("svc-name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),s("h2",{attrs:{id:"pod启动调试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pod启动调试"}},[a._v("#")]),a._v(" Pod启动调试")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#启动pod失败可以尝试通过以下两个命令查看失败原因")]),a._v("\nkubectl -n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("namespaces"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" describe pod "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("pod-name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" \nkubectl -n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("namespaces"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" log "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("pod-name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),s("h2",{attrs:{id:"secret命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#secret命令"}},[a._v("#")]),a._v(" Secret命令")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("kubectl create -f secret.yaml\nkubectl get secret\n")])])]),s("h2",{attrs:{id:"configmap命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configmap命令"}},[a._v("#")]),a._v(" ConfigMap命令")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("kubectl create configmap redis-config --from-file"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("redis.properties\nkubectl get cm\nkubectl describe cm redis-config\n")])])]),s("h2",{attrs:{id:"namespace命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#namespace命令"}},[a._v("#")]),a._v(" namespace命令")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("kubectl get ns\nkubectl create ns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("ns name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),s("h2",{attrs:{id:"万能重启pod命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#万能重启pod命令"}},[a._v("#")]),a._v(" 万能重启Pod命令")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("kubectl get pod "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("podname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" -n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("namespace"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" -o yaml "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" kubectl replace --force -f -\n")])])]),s("h2",{attrs:{id:"进入pod"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#进入pod"}},[a._v("#")]),a._v(" 进入pod")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("kubectl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" -ti "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("your-pod-name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("  -n "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("your-namespace"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("  -- /bin/sh\n")])])]),s("h2",{attrs:{id:"查询pod的yaml文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查询pod的yaml文件"}},[a._v("#")]),a._v(" 查询Pod的yaml文件")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("kubectl get pod "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("podname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" -n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("naemspace"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" -o yaml "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("文件名"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(".yml\n")])])]),s("h2",{attrs:{id:"k8s-证书过期更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#k8s-证书过期更新"}},[a._v("#")]),a._v(" k8s 证书过期更新")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("kubeadm alpha certs renew all\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);